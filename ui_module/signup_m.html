{% module loading_m() %}
<div id='v_signup' v-loading="loading">
    <div class="box box-solid">
        <div class="box-header with-border">
            <h3 class="text-center">用户注册</h3>
            <div class="box-tools pull-right">
            </div>
        </div>
        <div class="box-body">
            <div class="form-group">
                <div class="input-group input-group-lg">
                    <span class="input-group-addon">
                        <i class="fa fa-user"></i>
                    </span>
                    <input type="text" v-model="user_name"  value="{{user_name}}" class="form-control" placeholder="请输入用户名" v-on="focus:cleanError">
                </div>
            </div>
            <div class="form-group">
                <div class="input-group input-group-lg">
                    <span class="input-group-addon">
                        <i class="fa fa-envelope"></i>
                    </span>
                    <input type="text" v-model="email" value="{{email}}" v-regexp="'^([a-z0-9]*[-_]?[a-z0-9]+)*@([a-z0-9]*[-_]?[a-z0-9]+)+[\.][a-z]{2,3}([\.][a-z]{2})?$': email" class="form-control" placeholder="请输入邮箱地址，便于密码找回" v-on="focus:cleanError">
                </div>
            </div>
            <div class="form-group">
                <div class="input-group input-group-lg">
                    <span class="input-group-addon">
                        <i class="fa fa-lock"></i>
                    </span>
                    <input type="password" v-model="password" class="form-control" id="password" placeholder="请输入密码" v-on="keyup: signup | key 'enter',focus:cleanError">
                </div>
            </div>
            <div class="form-group">
                <div class="input-group input-group-lg">
                    <span class="input-group-addon">
                        <i class="fa fa-lock"></i>
                    </span>
                    <input type="password" v-model="repassword" class="form-control" id="password" placeholder="再次输入密码" v-on="keyup: signup | key 'enter',focus:cleanError">
                </div>
            </div>
            {%if user_types%}
            <div class="form-group">
                <div class="input-group input-group-lg">
                    <span class="input-group-addon">
                        <i class="fa fa-users"></i>
                    </span>
                    <select v-model="user_type" class="form-control">
                        <option value="" disabled selected>用户类型</option>
                        {%for user_type in user_types%}
                        <option value="{{user_type['value']}}">{{user_type['name']}}</option>
                        {%end%}
                    </select>
                </div>
            </div>
            {%end%}
            <div class="form-group">
                <button v-btn-loading="loading" v-on="click: signup" class="btn {{btn_color}} btn-lg btn-block bz-signup-btn" v-disable="loading">注册 </button>
            </div>
        </div>
        <div class="box-footer">
            <a href="/login">返回登录</a>
        </div>
    </div>
    <div v-show="error_info" class="alert alert-warning alert-dismissable">
        <h4><i class="icon fa fa-warning"></i>(%error_info%)</h4>
    </div>
</div>
