{"version":3,"sources":["pagination_m.coffee"],"names":[],"mappings":"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","file":"pagination_m.js","sourceRoot":"/source/","sourcesContent":["    currPageObj = {}\n    genPage = (cfg) ->\n        pages = []\n        if(cfg.showFL)\n            obj = {}\n            obj.name = \"第一页\"\n            obj.targetPage = 1\n            if(cfg.currPage == 1)\n                obj.classStr = \"disabled\"\n                obj.canClick = false\n            else\n                obj.classStr = \"\"\n                obj.canClick = true\n            pages.push(obj)\n        if(cfg.showFN)\n            obj = {}\n            obj.name = \"上一页\"\n            obj.targetPage = cfg.currPage - 1\n            if(cfg.currPage == 1)\n                obj.classStr = \"disabled\"\n                obj.canClick = false\n            else\n                obj.classStr = \"\"\n                obj.canClick = true\n            pages.push(obj)\n        center = parseInt(cfg.showPageNum/2)\n        if(cfg.currPage > center)\n            showPageBegin = cfg.currPage - center\n        else\n            showPageBegin = 1\n        showPageEnd = showPageBegin + cfg.showPageNum - 1\n        if(showPageEnd > cfg.endPage)\n            showPageBegin = cfg.endPage - cfg.showPageNum + 1\n            showPageEnd = cfg.endPage\n        if(showPageBegin < 1)\n            showPageBegin = 1\n        while showPageBegin <= showPageEnd\n            obj = {}\n            obj.name = showPageBegin\n            obj.targetPage = showPageBegin\n            obj.canClick = true\n            if(cfg.currPage == showPageBegin)\n                obj.classStr = \"active\"\n                obj.canClick = false\n                currPageObj = obj\n            pages.push(obj)\n            showPageBegin++\n        if(cfg.showFN)\n            obj = {}\n            obj.name = \"下一页\"\n            obj.targetPage = cfg.currPage + 1\n            if(cfg.currPage >= cfg.endPage)\n                obj.classStr = \"disabled\"\n                obj.canClick = false\n            else\n                obj.classStr = \"\"\n                obj.canClick = true\n            pages.push(obj)\n        if(cfg.showFL)\n            obj = {}\n            obj.name = \"最后一页\"\n            obj.targetPage = cfg.endPage\n            if(cfg.currPage >= cfg.endPage)\n                obj.classStr = \"disabled\"\n                obj.canClick = false\n            else\n                obj.classStr = \"\"\n                obj.canClick = true\n            pages.push(obj)\n         return pages\n         \n    Vue.component 'vue_pagination', \n        inherit: true\n        template: '<nav><ul class=\"pagination\"><li class=\"(% p.classStr %)\" v-repeat=\"p : pages\"><a href=\"javascript:void(0);\" v-on=\"click: butClick(p)\">(%p.name%)</a></li></ul></nav>'\n        \n        created: ->\n            cfg =\n                showFL: true #是否显示第一页,最后一页\n                showFN: true #是否显示上一页,下一页\n                pageCount: 10 #每页几行\n                resultCount: 1 #总记录数,必须\n                currPage: 1 #当前第几页\n                showPageNum: 5 #显示几个页面按钮\n                showGotoPage: true #是否显示直接跳转\n                gotoPageFun: -> #点击页数按钮时的回掉方法,用以使用者加载数据.组件传递给该方法的参数:currPage(当前页), \n                                #beginIndex(数据库查询开始条数,部分数据库从0开始的需要减一), endIndex(数据库查询结束条数), limit(每页几条数据)\n                onInitedLoadCurrPageData: false #组件初始化完成后自动调用gotoPageFun方法(用以加载当前页数据)的开关\n                \n            @$watch(\"pagination\", (newVal, oldVal)->\n                if(!@pagination)\n                    @pagination = {}\n                if(typeof (@pagination.showFL) == \"boolean\")\n                    cfg.showFL = @pagination.showFL\n                if(typeof (@pagination.showFN) == \"boolean\")\n                    cfg.showFN = @pagination.showFN\n                if(@pagination.pageCount)\n                    cfg.pageCount = @pagination.pageCount\n                if(@pagination.resultCount)\n                    cfg.resultCount = @pagination.resultCount\n                if(@pagination.currPage)\n                    cfg.currPage = @pagination.currPage\n                    if(cfg.currPage < 1)\n                        cfg.currPage = 1\n                if(@pagination.showPageNum)\n                    cfg.showPageNum = @pagination.showPageNum\n                if(@pagination.showGotoPage)\n                    cfg.showGotoPage = @pagination.showGotoPage\n                if(@pagination.gotoPageFun)\n                    cfg.gotoPageFun = @pagination.gotoPageFun\n                if(@pagination.onInitedLoadCurrPageData)\n                    cfg.onInitedLoadCurrPageData = @pagination.onInitedLoadCurrPageData\n                \n                cfg.endPage = parseInt(cfg.resultCount/cfg.pageCount)\n                if(cfg.resultCount%cfg.pageCount > 0)\n                    cfg.endPage = cfg.endPage + 1\n                @$set(\"pagination_cfg\", cfg)\n                @$set(\"pages\", genPage(cfg))\n                @butClick(currPageObj, true)\n            ,true,true)\n        ready: ->\n            if(@pagination_cfg.onInitedLoadCurrPageData)\n                @butClick(currPageObj, true)\n        methods: \n                butClick: (page, firstCall) ->\n                    if(page.targetPage && (page.canClick || firstCall))\n                        @pagination_cfg.currPage = page.targetPage\n                        #计算起始行数(部分数据库从0开始,后端拿到这个值后需要减1)\n                        beginIndex = (@pagination_cfg.currPage - 1) * @pagination_cfg.pageCount + 1\n                        if(@pagination_cfg.currPage == 1)\n                            beginIndex = 1\n                        #计算结束行数(部分数据库通过起始行号及取多少条确定,不需要次参数)\n                        endIndex = beginIndex + @pagination_cfg.pageCount - 1\n                        @pagination_cfg.gotoPageFun(@pagination_cfg.currPage, beginIndex, endIndex, @pagination_cfg.pageCount)\n                        @$set(\"pages\", genPage(@pagination_cfg)) #生成分页组件数据模型并刷新组件\n"]}