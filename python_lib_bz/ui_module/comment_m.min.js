(function() {
  $(function() {
    var v_comment;
    return v_comment = new Vue({
      el: '#v_comment',
      data: {
        error_info: false,
        btn_loading: false,
        loading: false,
        parent_id: 0
      },
      methods: {
        clean: function() {
          return this.$data.error_info = false;
        },
        clickLink: function(key_type, key) {
          var comment, data;
          comment = this.$data.comment;
          data = this.$data;
          if (comment === void 0 || comment.trim() === '') {
            data.error_info = '好歹说点什么吧!';
            return;
          }
          data.btn_loading = true;
          return $.post('/comment', JSON.stringify({
            key_type: key_type,
            key: key,
            comment: comment,
            parent_id: this.$data.parent_id
          }), function(result) {
            data.btn_loading = false;
            if (result.error !== '0') {
              console.log(result.error);
              return alert(result.error);
            } else {
              return location.reload();
            }
          });
        },
        reply: function(event, parent_id) {
          var comment_reply;
          comment_reply = $(event.target).closest('.comment-reply');
          $(comment_reply).append($('#comment_text_area'));
          this.$data.parent_id = parent_id;
          return $(".comment-textarea").focus();
        }
      }
    });
  });

}).call(this);
