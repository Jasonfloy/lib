{"version":3,"sources":["crud_check_m.coffee"],"names":[],"mappings":"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","file":"crud_check_m.js","sourceRoot":"/source/","sourcesContent":["$(->\n    v_crud_check = new Vue\n        el: '#v_crud_check'\n        data:\n            editable: false\n            record: {}\n            loading: false\n\n        created: ->\n            @loadData()\n        \n        methods:\n            getTableName:->\n                parm = window.bz.getUrlParm()\n                return parm[2]\n\n            jump2List: ->\n                path = '/crud_check_list/' + @getTableName()\n                location.pathname = path\n            \n            save:(checked) ->\n                _this = @\n                @loading = true\n                table_name = @getTableName()\n                record = {'id': @record.id, 'checked': checked}\n                console.log \"record: \", record\n                $.post('/crud_api', JSON.stringify {table_name: table_name, record: record}).done((data)->\n                    if data.error == '0'\n                        window.bz.showSuccess5('审核成功...正在返回列表')\n                        _this.loading = false\n                        delay 2000, -> _this.jump2List()\n                    else\n                        window.bz.showError5(data.error)\n                )\n\n            loadData: ->\n                _this = @\n                table_name = @getTableName()\n                parm = window.bz.getHashParms()\n                id = parm[0].replace('#','')\n\n                $.post('/crud_check', JSON.stringify({'table_name': table_name, 'id': id})).done((result)->\n                    if result.error != '0'\n                        window.bz.showError5(result.error)\n                    else\n                        if result.data.length > 0\n                            record = result.data[0]\n                            record.id = id\n                            for field of record\n                                if record[field] != null and typeof record[field] == \"object\"\n                                    record[field] = JSON.stringify(record[field])\n                            _this.record = record\n\n                        else if id != ''\n                            window.bz.showError5('未找到这条数据!')\n                )\n)\n"]}